<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meme Generator | Frontend Fun</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* Custom styles to complement Tailwind */
    :root {
      --primary-color: #8b5cf6;
      --primary-dark: #7c3aed;
      --bg-color: #f9fafb;
      --text-color: #111827;
      --card-bg: #ffffff;
      --border-color: #e5e7eb;
    }

    .dark-mode {
      --primary-color: #a78bfa;
      --primary-dark: #8b5cf6;
      --bg-color: #111827;
      --text-color: #f9fafb;
      --card-bg: #1f2937;
      --border-color: #374151;
    }

    body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    #memeCanvas {
      background-color: var(--card-bg);
      max-height: 500px;
      object-fit: contain;
      border-color: var(--border-color);
    }

    /* Custom scrollbar for template gallery */
    #templateGallery {
      scrollbar-width: thin;
      scrollbar-color: #9ca3af var(--border-color);
    }

    #templateGallery::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    #templateGallery::-webkit-scrollbar-track {
      background: var(--border-color);
      border-radius: 4px;
    }

    #templateGallery::-webkit-scrollbar-thumb {
      background-color: #9ca3af;
      border-radius: 4px;
    }

    /* Animation for meme generation */
    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.02);
      }

      100% {
        transform: scale(1);
      }
    }

    .meme-pulse {
      animation: pulse 0.3s ease-in-out;
    }

    /* Toggle Switch */
    .theme-toggle {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }

    .theme-toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .theme-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #4b5563;
      border-radius: 34px;
      transition: 0.4s;
    }

    .theme-toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      border-radius: 50%;
      transition: 0.4s;
    }

    .theme-toggle input:checked+.theme-toggle-slider {
      background-color: var(--primary-color);
    }

    .theme-toggle input:checked+.theme-toggle-slider:before {
      transform: translateX(30px);
    }

    /* Card styling */
    .card {
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: all 0.3s ease;
    }

    .card:hover {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
        0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    /* Button styling */
    .btn-primary {
      background-color: var(--primary-color);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      font-weight: 500;
      transition: background-color 0.3s ease;
    }

    .btn-primary:hover {
      background-color: var(--primary-dark);
    }

    /* Input styling */
    .input-field {
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 0.375rem;
      padding: 0.5rem 0.75rem;
      transition: border-color 0.3s ease;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
    }

    /* Responsive adjustments */
    @media (max-width: 640px) {
      #memeCanvas {
        max-height: 300px;
      }

      .container {
        padding-left: 1rem;
        padding-right: 1rem;
      }
    }

    @media (min-width: 1024px) {
      .container {
        max-width: 1280px;
      }
    }

    /* Loading animation */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body class="min-h-screen">
  <header class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg">
    <div class="container mx-auto px-4 py-6">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div>
          <h1 class="text-3xl md:text-4xl font-bold">
            <i class="fas fa-images mr-3"></i>Meme Generator
          </h1>
          <p class="mt-2 text-purple-200">
            Create hilarious memes in seconds!
          </p>
        </div>
        <div class="mt-4 md:mt-0 flex items-center space-x-4">
          <span class="text-sm hidden sm:block">Dark Mode</span>
          <label class="theme-toggle">
            <input type="checkbox" id="themeToggle">
            <span class="theme-toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Meme Editor Section -->
      <div class="w-full lg:w-2/3">
        <div class="card p-4 md:p-6">
          <h2 class="text-xl md:text-2xl font-semibold mb-4 flex items-center">
            <i class="fas fa-edit mr-3 text-purple-500"></i>Meme Editor
          </h2>

          <!-- Canvas for meme -->
          <div class="relative mb-6">
            <canvas id="memeCanvas" class="w-full max-w-full border rounded-lg"></canvas>
            <div id="downloadBtn"
              class="absolute top-2 right-2 bg-purple-600 text-white p-3 rounded-full cursor-pointer hover:bg-purple-700 transition shadow-md"
              title="Download Meme">
              <i class="fas fa-download"></i>
            </div>
            <div id="shareBtn"
              class="absolute top-2 right-14 bg-blue-500 text-white p-3 rounded-full cursor-pointer hover:bg-blue-600 transition shadow-md"
              title="Share Meme">
              <i class="fas fa-share-alt"></i>
            </div>
          </div>

          <!-- Controls -->
          <div class="space-y-4 md:space-y-6">
            <!-- Image URL Input -->
            <div>
              <label for="imageUrl" class="block text-sm font-medium mb-1 flex items-center">
                <i class="fas fa-link mr-2 text-gray-500"></i>Image URL
              </label>
              <div class="flex gap-2">
                <input type="text" id="imageUrl" placeholder="Paste image URL or select from templates"
                  class="input-field flex-1" />
                <button id="loadImageBtn" class="btn-primary">
                  <span id="loadBtnText">Load</span>
                  <span id="loadBtnSpinner" class="loading-spinner hidden"></span>
                </button>
              </div>
            </div>

            <!-- Text Inputs -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="topText" class="block text-sm font-medium mb-1 flex items-center">
                  <i class="fas fa-arrow-up mr-2 text-gray-500"></i>Top Text
                </label>
                <input type="text" id="topText" placeholder="Enter top text" class="input-field w-full" />
              </div>
              <div>
                <label for="bottomText" class="block text-sm font-medium mb-1 flex items-center">
                  <i class="fas fa-arrow-down mr-2 text-gray-500"></i>Bottom Text
                </label>
                <input type="text" id="bottomText" placeholder="Enter bottom text" class="input-field w-full" />
              </div>
            </div>

            <!-- Text Style Controls -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
              <div>
                <label for="textColor" class="block text-sm font-medium mb-1">Text Color</label>
                <input type="color" id="textColor" value="#ffffff" class="w-full h-10 cursor-pointer rounded" />
              </div>
              <div>
                <label for="fontSize" class="block text-sm font-medium mb-1">Font Size</label>
                <input type="range" id="fontSize" min="10" max="100" value="40" class="w-full" />
                <span id="fontSizeValue" class="text-sm text-gray-500">40px</span>
              </div>
              <div>
                <label for="fontFamily" class="block text-sm font-medium mb-1">Font Family</label>
                <select id="fontFamily" class="input-field w-full">
                  <option value="Impact">Impact</option>
                  <option value="Arial">Arial</option>
                  <option value="Comic Sans MS">Comic Sans</option>
                  <option value="Verdana">Verdana</option>
                  <option value="Courier New">Courier New</option>
                </select>
              </div>
              <div>
                <label for="textStroke" class="block text-sm font-medium mb-1">Text Outline</label>
                <input type="range" id="textStroke" min="0" max="10" value="2" class="w-full" />
                <span id="textStrokeValue" class="text-sm text-gray-500">2px</span>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2">
              <button id="generateBtn" class="btn-primary py-3 font-semibold text-lg">
                <i class="fas fa-bolt mr-2"></i>Generate Meme
              </button>
              <button id="randomBtn"
                class="bg-gradient-to-r from-pink-500 to-rose-500 text-white py-3 rounded-md font-semibold hover:opacity-90 transition text-lg">
                <i class="fas fa-random mr-2"></i>Random Meme
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Templates & Recent Memes Section -->
      <div class="w-full lg:w-1/3">
        <!-- Templates Section -->
        <div class="card p-4 md:p-6 mb-6">
          <h2 class="text-xl md:text-2xl font-semibold mb-4 flex items-center">
            <i class="fas fa-layer-group mr-3 text-purple-500"></i>Popular Templates
          </h2>
          <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-2 gap-3" id="templateGallery">
            <!-- Templates will be loaded here by JavaScript -->
          </div>
        </div>

        <!-- Recent Memes Section -->
        <div class="card p-4 md:p-6">
          <h2 class="text-xl md:text-2xl font-semibold mb-4 flex items-center">
            <i class="fas fa-history mr-3 text-purple-500"></i>Your Recent Memes
          </h2>
          <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-2 gap-3" id="recentMemes">
            <!-- Recent memes will be loaded here by JavaScript -->
            <p class="text-gray-500 col-span-full text-center py-4">
              No recent memes yet
            </p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="bg-gray-800 text-white py-6 mt-12">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-4 md:mb-0">
          <p class="text-lg font-medium">Made with <i class="fas fa-heart text-red-500 mx-1"></i> by Frontend Dev</p>
          <p class="text-gray-400 text-sm mt-2">
            Â© 2025 Meme Generator. All memes belong to their respective owners.
          </p>
        </div>
        <div class="flex space-x-4">
          <a href="#" class="text-gray-300 hover:text-white transition">
            <i class="fab fa-github text-xl"></i>
          </a>
          <a href="#" class="text-gray-300 hover:text-white transition">
            <i class="fab fa-twitter text-xl"></i>
          </a>
          <a href="#" class="text-gray-300 hover:text-white transition">
            <i class="fab fa-codepen text-xl"></i>
          </a>
        </div>
      </div>
    </div>
  </footer>
  <script src="js/script.js">
    document.addEventListener("DOMContentLoaded", function () {
  // Theme toggle functionality
  const themeToggle = document.getElementById("themeToggle");
  const body = document.body;

  // Check for saved theme preference or default to light
  const savedTheme = localStorage.getItem("meme-theme") || "light";
  if (savedTheme === "dark") {
    body.classList.add("dark-mode");
    themeToggle.checked = true;
  }

  themeToggle.addEventListener("change", function () {
    if (this.checked) {
      body.classList.add("dark-mode");
      localStorage.setItem("meme-theme", "dark");
    } else {
      body.classList.remove("dark-mode");
      localStorage.setItem("meme-theme", "light");
    }
  });

  // Canvas setup
  const canvas = document.getElementById("memeCanvas");
  const ctx = canvas.getContext("2d");

  // Input elements
  const imageUrlInput = document.getElementById("imageUrl");
  const loadImageBtn = document.getElementById("loadImageBtn");
  const loadBtnText = document.getElementById("loadBtnText");
  const loadBtnSpinner = document.getElementById("loadBtnSpinner");
  const topTextInput = document.getElementById("topText");
  const bottomTextInput = document.getElementById("bottomText");
  const textColorInput = document.getElementById("textColor");
  const fontSizeInput = document.getElementById("fontSize");
  const fontSizeValue = document.getElementById("fontSizeValue");
  const fontFamilyInput = document.getElementById("fontFamily");
  const textStrokeInput = document.getElementById("textStroke");
  const textStrokeValue = document.getElementById("textStrokeValue");
  const generateBtn = document.getElementById("generateBtn");
  const downloadBtn = document.getElementById("downloadBtn");
  const shareBtn = document.getElementById("shareBtn");
  const randomBtn = document.getElementById("randomBtn");
  const templateGallery = document.getElementById("templateGallery");
  const recentMemesContainer = document.getElementById("recentMemes");

  // State
  let currentImage = null;
  let recentMemes = JSON.parse(localStorage.getItem("recentMemes")) || [];

  // Initialize
  setupCanvas();
  loadTemplates();
  loadRecentMemes();

  // Event listeners
  loadImageBtn.addEventListener("click", loadImageFromUrl);
  generateBtn.addEventListener("click", generateMeme);
  downloadBtn.addEventListener("click", downloadMeme);
  shareBtn.addEventListener("click", shareMeme);
  randomBtn.addEventListener("click", generateRandomMeme);

  fontSizeInput.addEventListener("input", function () {
    fontSizeValue.textContent = `${this.value}px`;
    if (currentImage) drawMeme();
  });

  textStrokeInput.addEventListener("input", function () {
    textStrokeValue.textContent = `${this.value}px`;
    if (currentImage) drawMeme();
  });

  // Real-time updates for text and color changes
  topTextInput.addEventListener("input", function () {
    if (currentImage) drawMeme();
  });

  bottomTextInput.addEventListener("input", function () {
    if (currentImage) drawMeme();
  });

  textColorInput.addEventListener("input", function () {
    if (currentImage) drawMeme();
  });

  fontFamilyInput.addEventListener("change", function () {
    if (currentImage) drawMeme();
  });

  // Functions
  function setupCanvas() {
    // Set canvas size while maintaining aspect ratio
    const maxWidth = 800;
    const maxHeight = 500;

    canvas.width = Math.min(window.innerWidth - 40, maxWidth);
    canvas.height = Math.min(window.innerWidth * 0.6, maxHeight);

    // Draw placeholder
    ctx.fillStyle = body.classList.contains("dark-mode")
      ? "#374151"
      : "#f3f4f6";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = body.classList.contains("dark-mode")
      ? "#9ca3af"
      : "#6b7280";
    ctx.textAlign = "center";
    ctx.font = "20px Arial";
    ctx.fillText(
      "Your meme will appear here",
      canvas.width / 2,
      canvas.height / 2
    );

    // Draw a small icon
    ctx.font = "40px Arial";
    ctx.fillText("ðŸ˜„", canvas.width / 2, canvas.height / 2 - 50);
  }

  function loadImageFromUrl() {
    const imageUrl = imageUrlInput.value.trim();

    if (!imageUrl) {
      showAlert("Please enter an image URL", "warning");
      return;
    }

    // Show loading state
    loadBtnText.textContent = "Loading...";
    loadBtnSpinner.classList.remove("hidden");

    const img = new Image();
    img.crossOrigin = "Anonymous";
    img.onload = function () {
      currentImage = img;
      drawMeme();

      // Reset loading state
      loadBtnText.textContent = "Load";
      loadBtnSpinner.classList.add("hidden");
    };
    img.onerror = function () {
      showAlert(
        "Failed to load image. Please check the URL and try again.",
        "error"
      );

      // Reset loading state
      loadBtnText.textContent = "Load";
      loadBtnSpinner.classList.add("hidden");
    };
    img.src = imageUrl;
  }

  function drawMeme() {
    if (!currentImage) return;

    // Clear canvas
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Calculate dimensions to maintain aspect ratio
    const ratio = Math.min(
      canvas.width / currentImage.width,
      canvas.height / currentImage.height
    );

    const width = currentImage.width * ratio;
    const height = currentImage.height * ratio;
    const x = (canvas.width - width) / 2;
    const y = (canvas.height - height) / 2;

    // Draw image
    ctx.drawImage(currentImage, x, y, width, height);

    // Text styles
    const fontSize = parseInt(fontSizeInput.value);
    const fontFamily = fontFamilyInput.value;
    const textColor = textColorInput.value;
    const strokeSize = parseInt(textStrokeInput.value);

    ctx.font = `${fontSize}px ${fontFamily}`;
    ctx.textAlign = "center";
    ctx.lineWidth = strokeSize;
    ctx.strokeStyle = "black";
    ctx.fillStyle = textColor;

    // Draw top text
    const topText = topTextInput.value;
    if (topText) {
      ctx.strokeText(topText, canvas.width / 2, y + fontSize + 10);
      ctx.fillText(topText, canvas.width / 2, y + fontSize + 10);
    }

    // Draw bottom text
    const bottomText = bottomTextInput.value;
    if (bottomText) {
      ctx.strokeText(bottomText, canvas.width / 2, canvas.height - y - 10);
      ctx.fillText(bottomText, canvas.width / 2, canvas.height - y - 10);
    }

    // Add pulse animation
    canvas.classList.add("meme-pulse");
    setTimeout(() => {
      canvas.classList.remove("meme-pulse");
    }, 300);
  }

  function generateMeme() {
    if (!currentImage) {
      showAlert("Please load an image first", "warning");
      return;
    }

    drawMeme();
    saveRecentMeme();
    showAlert("Meme generated successfully!", "success");
  }

  function downloadMeme() {
    if (!currentImage) {
      showAlert("Please generate a meme first", "warning");
      return;
    }

    const link = document.createElement("a");
    link.download = `meme-${Date.now()}.png`;
    link.href = canvas.toDataURL("image/png");
    link.click();

    showAlert("Meme downloaded!", "success");
  }

  function shareMeme() {
    if (!currentImage) {
      showAlert("Please generate a meme first", "warning");
      return;
    }

    canvas.toBlob((blob) => {
      const file = new File([blob], "meme.png", { type: "image/png" });

      if (
        navigator.share &&
        navigator.canShare &&
        navigator.canShare({ files: [file] })
      ) {
        navigator.share({
          files: [file],
          title: "Check out this meme!",
          text: "I created this meme using the Meme Generator!",
        });
      } else {
        // Fallback: Copy to clipboard or show modal
        const dataUrl = canvas.toDataURL("image/png");
        navigator.clipboard
          .writeText(dataUrl)
          .then(() => {
            showAlert("Meme copied to clipboard!", "success");
          })
          .catch(() => {
            // Download as fallback
            downloadMeme();
          });
      }
    });
  }

  function generateRandomMeme() {
    const templates = [
      {
        name: "Distracted Boyfriend",
        url: "https://i.imgflip.com/1bij.jpg",
        topText: "Me ignoring my responsibilities",
        bottomText: "Me looking at memes",
      },
      {
        name: "Drake Hotline Bling",
        url: "https://i.imgflip.com/30b1gx.jpg",
        topText: "Doing work",
        bottomText: "Making memes",
      },
      {
        name: "Two Buttons",
        url: "https://i.imgflip.com/1g8my4.jpg",
        topText: "Make a normal meme",
        bottomText: "Add random nonsense",
      },
      {
        name: "Change My Mind",
        url: "https://i.imgflip.com/24y43o.jpg",
        topText: "This is the best meme generator",
        bottomText: "Change my mind",
      },
      {
        name: "Batman Slapping Robin",
        url: "https://i.imgflip.com/9ehk.jpg",
        topText: "When someone says",
        bottomText: "Memes aren't art",
      },
      {
        name: "Expanding Brain",
        url: "https://i.imgflip.com/1jwhww.jpg",
        topText: "Small brain: Using meme templates",
        bottomText: "Galaxy brain: Making your own",
      },
    ];

    const randomTemplate =
      templates[Math.floor(Math.random() * templates.length)];

    imageUrlInput.value = randomTemplate.url;
    topTextInput.value = randomTemplate.topText;
    bottomTextInput.value = randomTemplate.bottomText;

    // Randomize text color
    const colors = [
      "#ffffff",
      "#ff0000",
      "#00ff00",
      "#0000ff",
      "#ffff00",
      "#ff00ff",
    ];
    textColorInput.value = colors[Math.floor(Math.random() * colors.length)];

    // Randomize font size
    fontSizeInput.value = Math.floor(Math.random() * 30) + 30;
    fontSizeValue.textContent = `${fontSizeInput.value}px`;

    loadImageFromUrl();
  }

  function loadTemplates() {
    const templates = [
      {
        name: "Distracted Boyfriend",
        url: "https://i.imgflip.com/1bij.jpg",
      },
      {
        name: "Drake Hotline Bling",
        url: "https://i.imgflip.com/30b1gx.jpg",
      },
      {
        name: "Two Buttons",
        url: "https://i.imgflip.com/1g8my4.jpg",
      },
      {
        name: "Change My Mind",
        url: "https://i.imgflip.com/24y43o.jpg",
      },
      {
        name: "Batman Slapping Robin",
        url: "https://i.imgflip.com/9ehk.jpg",
      },
      {
        name: "Woman Yelling at Cat",
        url: "https://i.imgflip.com/1h7in3.jpg",
      },
      {
        name: "Expanding Brain",
        url: "https://i.imgflip.com/1jwhww.jpg",
      },
      {
        name: "Surprised Pikachu",
        url: "https://i.imgflip.com/2kbn1e.jpg",
      },
    ];

    templateGallery.innerHTML = "";

    templates.forEach((template) => {
      const templateElement = document.createElement("div");
      templateElement.className = "cursor-pointer group";
      templateElement.innerHTML = `
                <div class="relative overflow-hidden rounded-lg aspect-square">
                    <img src="${template.url}" alt="${template.name}" 
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-200">
                    <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <span class="text-white font-medium text-sm text-center px-2">${template.name}</span>
                    </div>
                </div>
            `;
      templateElement.addEventListener("click", () => {
        imageUrlInput.value = template.url;
        loadImageFromUrl();

        // Add some funny default text based on template
        if (template.name === "Distracted Boyfriend") {
          topTextInput.value = "Me ignoring my responsibilities";
          bottomTextInput.value = "Me looking at memes";
        } else if (template.name === "Drake Hotline Bling") {
          topTextInput.value = "Doing work";
          bottomTextInput.value = "Making memes";
        } else if (template.name === "Surprised Pikachu") {
          topTextInput.value = "When you realize";
          bottomTextInput.value = "It's already Monday";
        }

        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      templateGallery.appendChild(templateElement);
    });
  }

  function saveRecentMeme() {
    const memeData = {
      imageUrl: imageUrlInput.value,
      topText: topTextInput.value,
      bottomText: bottomTextInput.value,
      timestamp: new Date().toISOString(),
      dataUrl: canvas.toDataURL("image/png"),
    };

    // Add to beginning of array
    recentMemes.unshift(memeData);

    // Keep only last 6 memes
    if (recentMemes.length > 6) {
      recentMemes = recentMemes.slice(0, 6);
    }

    localStorage.setItem("recentMemes", JSON.stringify(recentMemes));
    loadRecentMemes();
  }

  function loadRecentMemes() {
    if (recentMemes.length === 0) {
      recentMemesContainer.innerHTML =
        '<p class="text-gray-500 col-span-full text-center py-4">No recent memes yet</p>';
      return;
    }

    recentMemesContainer.innerHTML = "";

    recentMemes.forEach((meme, index) => {
      const memeElement = document.createElement("div");
      memeElement.className = "cursor-pointer group";
      memeElement.innerHTML = `
                <div class="relative overflow-hidden rounded-lg aspect-square">
                    <img src="${meme.dataUrl}" alt="Recent meme ${index + 1}" 
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-200">
                    <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <span class="text-white font-medium text-sm text-center px-2">${
                          meme.topText || ""
                        } ${meme.bottomText || ""}</span>
                    </div>
                </div>
            `;

      memeElement.addEventListener("click", () => {
        imageUrlInput.value = meme.imageUrl;
        topTextInput.value = meme.topText;
        bottomTextInput.value = meme.bottomText;
        loadImageFromUrl();
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      recentMemesContainer.appendChild(memeElement);
    });
  }

  function showAlert(message, type) {
    // Remove any existing alert
    const existingAlert = document.querySelector(".custom-alert");
    if (existingAlert) existingAlert.remove();

    const alert = document.createElement("div");
    alert.className = `custom-alert fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 flex items-center ${
      type === "success"
        ? "bg-green-500"
        : type === "error"
        ? "bg-red-500"
        : "bg-yellow-500"
    } text-white`;

    alert.innerHTML = `
          <i class="fas ${
            type === "success"
              ? "fa-check-circle"
              : type === "error"
              ? "fa-exclamation-circle"
              : "fa-exclamation-triangle"
          } mr-2"></i>
          <span>${message}</span>
        `;

    document.body.appendChild(alert);

    // Remove alert after 3 seconds
    setTimeout(() => {
      alert.remove();
    }, 3000);
  }

  // Responsive adjustments
  window.addEventListener("resize", function () {
    setupCanvas();
    if (currentImage) {
      drawMeme();
    }
  });
});

  </script>
</body>

</html>